# Бот МБ

## Сетка со смещением для поиска 4х

|     | 0   | 1   | 2   | 3   | 4   | 5   | 6   | 7   | 8   | 9   |
| --- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| 0   | 1   | .   | .   | .   | 2   | .   | .   | .   | 3   | .   |
| 1   | .   | 10  | .   | .   | .   | 11  | .   | .   | .   | 12  |
| 2   | .   | .   | 19  | .   | .   | .   | 20  | .   | .   | .   |
| 3   | .   | .   | .   | 23  | .   | .   | .   | 24  | .   | .   |
| 4   | 4   | .   | .   | .   | 5   | .   | .   | .   | 6   | .   |
| 5   | .   | 13  | .   | .   | .   | 14  | .   | .   | .   | 15  |
| 6   | .   | .   | 21  | .   | .   | .   | 22  | .   | .   | .   |
| 7   | .   | .   | .   | 25  | .   | .   | .   | 26  | .   | .   |
| 8   | 7   | .   | .   | .   | 8   | .   | .   | .   | 9   | .   |
| 9   | .   | 16  | .   | .   | .   | 17  | .   | .   | .   | 18  |

## Расстановки

### #1

```txt
  0 1 2 3 4 5 6 7 8 9 
0 . . . . . . . . . . 
1 . . . 1 . . . 1 . . 
2 . 2 . . . . . . . . 
3 . 2 . . . 2 2 . . 1 
4 . . . . . . . . . . 
5 . . 3 3 3 . . . . . 
6 . . . . . . . . . . 
7 . . 2 . 1 . 4 4 4 4 
8 . . 2 . . . . . . . 
9 . . . . . . 3 3 3 .
```

### #2

## Формула поиска кораблей

Бот реализует алгоритм поиска кораблей в двух режимах: **режим поиска (hunt mode)** и **режим прицеливания (target mode)**.

### Режим поиска (Hunt Mode)

В режиме поиска бот выбирает клетки для выстрела по формуле:

```
if (r mod n < 2) and (c mod n < 2) and (field[r, c] == CELL_UNKNOWN)
```

где:

- `r` - номер строки (0-9)
- `c` - номер столбца (0-9)
- `n` - параметр плотности поиска, начинающийся с 4

Алгоритм начинает с `n = 4`, что соответствует таблице выше. Если все возможные клетки по данной формуле исчерпаны без попаданий, `n` уменьшается: 4 → 3 → 2 → 1.

Клетки добавляются в массив `huntCells` в порядке обхода: сначала по строкам, затем по столбцам.

### Режим прицеливания (Target Mode)

При попадании бот переходит в режим прицеливания:

- Для одного попадания стреляет в соседние клетки (вверх, вниз, влево, вправо).
- При двух и более попаданиях определяет направление (горизонтальное или вертикальное) и стреляет вдоль линии корабля, включая возможные продолжения.
- При уничтожении корабля отмечает вокруг него невозможные клетки и возвращается в режим поиска.

## Отраженный алгоритм поиска

Для отраженного варианта алгоритма используется та же формула, но обход столбцов начинается с правой стороны поля:

```
for r := 0 to FIELD_SIZE - 1 do
  for c := FIELD_SIZE - 1 downto 0 do
    if (r mod n < 2) and (c mod n < 2) and (field[r, c] == CELL_UNKNOWN) then
      add to huntCells
```

Это позволяет начинать поиск с правой верхней клетки (0,9) и двигаться влево, обеспечивая симметричный порядок относительно оригинального алгоритма.
